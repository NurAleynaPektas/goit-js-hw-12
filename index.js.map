{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_KEY = '49228326-f0295c59acbd8047419a0b87e';\r\nconst BASE_URL = 'https://pixabay.com/api/';\r\n\r\nlet currentPage = 1;\r\nlet currentQuery = '';\r\n\r\nconst searchBtn = document.getElementById('searchBtn');\r\nconst searchQuery = document.getElementById('searchQuery');\r\nconst gallery = document.getElementById('gallery');\r\nconst loadMoreBtn = document.getElementById('loadMoreBtn');\r\nconst loadingSpinner = document.getElementById('loadingSpinner');\r\n\r\nsearchBtn.addEventListener('click', () => {\r\n  currentQuery = searchQuery.value;\r\n  currentPage = 1;\r\n  gallery.innerHTML = '';\r\n  fetchImages();\r\n});\r\n\r\nloadMoreBtn.addEventListener('click', () => {\r\n  currentPage += 1;\r\n  fetchImages();\r\n});\r\n\r\nasync function fetchImages() {\r\n  try {\r\n    loadingSpinner.style.display = 'block';\r\n    const response = await axios.get(BASE_URL, {\r\n      params: {\r\n        key: API_KEY,\r\n        q: currentQuery,\r\n        page: currentPage,\r\n        per_page: 40,\r\n      },\r\n    });\r\n\r\n    const images = response.data.hits;\r\n    const totalHits = response.data.totalHits;\r\n\r\n    if (currentPage * 40 >= totalHits) {\r\n      loadMoreBtn.style.display = 'none';\r\n      gallery.innerHTML += `<p>We're sorry, but you've reached the end of search results</p>`;\r\n    } else {\r\n      loadMoreBtn.style.display = 'block';\r\n    }\r\n\r\n    displayImages(images);\r\n    scrollPage();\r\n  } catch (error) {\r\n    console.error('Error fetching images:', error);\r\n  } finally {\r\n    loadingSpinner.style.display = 'none';\r\n  }\r\n}\r\n\r\nfunction displayImages(images) {\r\n  const imageElements = images\r\n    .map(image => {\r\n      return `<div class=\"gallery-item\">\r\n              <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" data-large=\"${image.largeImageURL}\" />\r\n              <div class=\"info\">\r\n          <p>Likes: ${image.likes}</p>\r\n          <p>Views: ${image.views}</p>\r\n          <p>Comments: ${image.comments}</p>\r\n          <p>Downloads: ${image.downloads}</p>\r\n        </div>\r\n            </div>`;\r\n    })\r\n    .join('');\r\n\r\n  gallery.innerHTML += imageElements;\r\n  initializeLightbox();\r\n}\r\n\r\nfunction initializeLightbox() {\r\n  const lightbox = new SimpleLightbox('.gallery-item img', {\r\n    captionsData: 'alt',\r\n    captionDelay: 250,\r\n  });\r\n  lightbox.refresh();\r\n}\r\nfunction scrollPage() {\r\n  const lastImage = gallery.lastElementChild;\r\n  if (lastImage) {\r\n    const { top } = lastImage.getBoundingClientRect();\r\n    window.scrollBy({\r\n      top: top + lastImage.offsetHeight * 2,\r\n      behavior: 'smooth',\r\n    });\r\n  }\r\n}\r\n"],"names":["API_KEY","BASE_URL","currentPage","currentQuery","searchBtn","searchQuery","gallery","loadMoreBtn","loadingSpinner","fetchImages","response","axios","images","totalHits","displayImages","scrollPage","error","imageElements","image","initializeLightbox","lastImage","top"],"mappings":"svBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEjB,IAAIC,EAAc,EACdC,EAAe,GAEnB,MAAMC,EAAY,SAAS,eAAe,WAAW,EAC/CC,EAAc,SAAS,eAAe,aAAa,EACnDC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAc,SAAS,eAAe,aAAa,EACnDC,EAAiB,SAAS,eAAe,gBAAgB,EAE/DJ,EAAU,iBAAiB,QAAS,IAAM,CACxCD,EAAeE,EAAY,MAC3BH,EAAc,EACdI,EAAQ,UAAY,GACpBG,GACF,CAAC,EAEDF,EAAY,iBAAiB,QAAS,IAAM,CAC1CL,GAAe,EACfO,GACF,CAAC,EAED,eAAeA,GAAc,CAC3B,GAAI,CACFD,EAAe,MAAM,QAAU,QAC/B,MAAME,EAAW,MAAMC,EAAM,IAAIV,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,KAAMD,EACN,SAAU,EACX,CACP,CAAK,EAEKU,EAASF,EAAS,KAAK,KACvBG,EAAYH,EAAS,KAAK,UAE5BR,EAAc,IAAMW,GACtBN,EAAY,MAAM,QAAU,OAC5BD,EAAQ,WAAa,oEAErBC,EAAY,MAAM,QAAU,QAG9BO,EAAcF,CAAM,EACpBG,GACD,OAAQC,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,CACjD,QAAY,CACRR,EAAe,MAAM,QAAU,MAChC,CACH,CAEA,SAASM,EAAcF,EAAQ,CAC7B,MAAMK,EAAgBL,EACnB,IAAIM,GACI;AAAA,0BACaA,EAAM,YAAY,UAAUA,EAAM,IAAI,iBAAiBA,EAAM,aAAa;AAAA;AAAA,sBAE9EA,EAAM,KAAK;AAAA,sBACXA,EAAM,KAAK;AAAA,yBACRA,EAAM,QAAQ;AAAA,0BACbA,EAAM,SAAS;AAAA;AAAA,mBAGpC,EACA,KAAK,EAAE,EAEVZ,EAAQ,WAAaW,EACrBE,GACF,CAEA,SAASA,GAAqB,CACX,IAAI,eAAe,oBAAqB,CACvD,aAAc,MACd,aAAc,GAClB,CAAG,EACQ,QAAO,CAClB,CACA,SAASJ,GAAa,CACpB,MAAMK,EAAYd,EAAQ,iBAC1B,GAAIc,EAAW,CACb,KAAM,CAAE,IAAAC,CAAG,EAAKD,EAAU,sBAAqB,EAC/C,OAAO,SAAS,CACd,IAAKC,EAAMD,EAAU,aAAe,EACpC,SAAU,QAChB,CAAK,CACF,CACH"}